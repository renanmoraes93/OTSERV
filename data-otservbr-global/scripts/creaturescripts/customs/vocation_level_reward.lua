local table = {
  
        -- [1,5] = VOCATION ID
        -- [LEVEL] = {items = {{itemid = ITEM_ID, count = COUNT}}, storage = YOU_CHOOSE, msg = "MESSAGE FOR THE PLAYER"},

   [{1, 5}] = {
     [13] = {items = {{itemid = 3075, count = 1}}, storage = 40100, msg = "You won wand of dragonbreath for reaching level 13!"},
     [19] = {items = {{itemid = 3072, count = 1}}, storage = 40101, msg = "You won wand of decay for reaching level 19!"},
     [20] = {items = {{itemid = 3043, count = 2}}, storage = 40102, msg = "You won 20k for reaching level 20!"},
     [22] = {items = {{itemid = 8093, count = 1}}, storage = 40107, msg = "You won wand of draconia for reaching level 22!"},
     [26] = {items = {{itemid = 3073, count = 1}}, storage = 40103, msg = "You won wand of cosmic energy for reaching level 26!"},
     [33] = {items = {{itemid = 3071, count = 1}}, storage = 40104, msg = "You won wand of inferno for reaching level 33!"},
     [37] = {items = {{itemid = 8092, count = 1}}, storage = 40105, msg = "You won wand of starstorm for reaching level 37!"},
     [42] = {items = {{itemid = 8094, count = 1}}, storage = 40106, msg = "You won wand of voodoo for reaching level 42!"},
	 [70] = {items = {{itemid = 44608, count = 1}}, storage = 40108, msg = "You won lesser sage gem for reaching level 70!"},
	 [100] = {items = {{itemid = 44609, count = 1}}, storage = 40109, msg = "You won sage gem for reaching level 100!"},
	 [130] = {items = {{itemid = 44610, count = 1}}, storage = 40110, msg = "You won greater sage gem for reaching level 130!"},
	 [170] = {items = {{itemid = 44608, count = 1}}, storage = 40111, msg = "You won lesser sage gem for reaching level 170!"},
	 --[180] = {items = {{itemid = 44930, count = 1}}, storage = 40143, msg = "You won Present Mount for reaching level 180, use command !mountsdoll"},
	 [200] = {items = {{itemid = 44609, count = 1}}, storage = 40112, msg = "You won sage gem for reaching level 200!"},
	 [230] = {items = {{itemid = 44610, count = 1}}, storage = 40113, msg = "You won greater sage gem for reaching level 230!"},
	 [270] = {items = {{itemid = 44608, count = 1}}, storage = 40114, msg = "You won lesser sage gem for reaching level 270!"},
	 [300] = {items = {{itemid = 44609, count = 1}}, storage = 40115, msg = "You won sage gem for reaching level 300!"},
	 [330] = {items = {{itemid = 44610, count = 1}}, storage = 40116, msg = "You won greater sage gem for reaching level 330!"}
   },
   [{2, 6}] = {
     [13] = {items = {{itemid = 3070, count = 1}}, storage = 40100, msg = "You won moonlight rod for reaching level 13!"},
     [19] = {items = {{itemid = 3069, count = 1}}, storage = 40101, msg = "You won necrotic rod for reaching level 19!"},
     [20] = {items = {{itemid = 3043, count = 2}}, storage = 40102, msg = "You won 20k for reaching level 20!"},
     [22] = {items = {{itemid = 8083, count = 1}}, storage = 40120, msg = "You won northwind rod for reaching level 22!"},
     [26] = {items = {{itemid = 3065, count = 1}}, storage = 40103, msg = "You won terra rod for reaching level 26!"},
     [33] = {items = {{itemid = 3067, count = 1}}, storage = 40104, msg = "You won Hailstorm Rod for reaching level 33!"},
     [37] = {items = {{itemid = 8084, count = 1}}, storage = 40105, msg = "You won Springsprout Rod for reaching level 37!"},
     [42] = {items = {{itemid = 8082, count = 1}}, storage = 40121, msg = "You won Underworld Rod for reaching level 42!"},
	 [70] = {items = {{itemid = 44611, count = 1}}, storage = 40117, msg = "You won lesser mystic gem for reaching level 70!"},
	 [100] = {items = {{itemid = 44612, count = 1}}, storage = 40118, msg = "You won mystic gem for reaching level 100!"},
	 [130] = {items = {{itemid = 44613, count = 1}}, storage = 40119, msg = "You won greater mystic gem for reaching level 130!"},
	 [170] = {items = {{itemid = 44611, count = 1}}, storage = 40122, msg = "You won lesser mystic gem for reaching level 170!"},
	 --[180] = {items = {{itemid = 44930, count = 1}}, storage = 40144, msg = "You won Present Mount for reaching level 180, use command !mountsdoll"},
	 [200] = {items = {{itemid = 44612, count = 1}}, storage = 40123, msg = "You won mystic gem for reaching level 300!"},
	 [330] = {items = {{itemid = 44613, count = 1}}, storage = 40124, msg = "You won greater mystic gem for reaching level 330!"}
   },
   [{3, 7}] = {
     [20] = {items = {{itemid = 3043, count = 2}}, storage = 40102, msg = "You won 20k for reaching level 20!"},
	 [70] = {items = {{itemid = 44605, count = 1}}, storage = 40125, msg = "You won lesser marksman gem for reaching level 70!"},
	 [100] = {items = {{itemid = 44606, count = 1}}, storage = 40126, msg = "You won marksman gem for reaching level 100!"},
	 [130] = {items = {{itemid = 44607, count = 1}}, storage = 40127, msg = "You won greater marksman gem for reaching level 130!"},
	 [170] = {items = {{itemid = 44605, count = 1}}, storage = 40128, msg = "You won lesser marksman gem for reaching level 170!"},
	 --[180] = {items = {{itemid = 44930, count = 1}}, storage = 40145, msg = "You won Present Mount for reaching level 180, use command !mountsdoll"},
	 [200] = {items = {{itemid = 44606, count = 1}}, storage = 40129, msg = "You won marksman gem for reaching level 200!"},
	 [230] = {items = {{itemid = 44607, count = 1}}, storage = 40130, msg = "You won greater marksman gem for reaching level 230!"},
	 [270] = {items = {{itemid = 44605, count = 1}}, storage = 40131, msg = "You won lesser marksman gem for reaching level 270!"},
	 [300] = {items = {{itemid = 44606, count = 1}}, storage = 40132, msg = "You won marksman gem for reaching level 300!"},
	 [330] = {items = {{itemid = 44607, count = 1}}, storage = 40133, msg = "You won greater marksman gem for reaching level 330!"}
   },
   [{4, 8}] = {
     [20] = {items = {{itemid = 3043, count = 2}}, storage = 40102, msg = "You won 20k for reaching level 20!"},
	 [70] = {items = {{itemid = 44602, count = 1}}, storage = 40134, msg = "You won lesser guardian gem for reaching level 70!"},
	 [100] = {items = {{itemid = 44603, count = 1}}, storage = 40135, msg = "You won guardian gem for reaching level 100!"},
	 [130] = {items = {{itemid = 44604, count = 1}}, storage = 40136, msg = "You won greater guardian gem for reaching level 130!"},
	 [170] = {items = {{itemid = 44602, count = 1}}, storage = 40137, msg = "You won lesser guardian gem for reaching level 170!"},
	--[180] = {items = {{itemid = 44930, count = 1}}, storage = 40146, msg = "You won Present Mount for reaching level 180, use command !mountsdoll"},
	 [200] = {items = {{itemid = 44603, count = 1}}, storage = 40138, msg = "You won guardian gem for reaching level 200!"},
	 [230] = {items = {{itemid = 44604, count = 1}}, storage = 40139, msg = "You won greater guardian gem for reaching level 230!"},
	 [270] = {items = {{itemid = 44602, count = 1}}, storage = 40140, msg = "You won lesser guardian gem for reaching level 270!"},
	 [300] = {items = {{itemid = 44603, count = 1}}, storage = 40141, msg = "You won guardian gem for reaching level 300!"},
	 [330] = {items = {{itemid = 44604, count = 1}}, storage = 40142, msg = "You won greater guardian gem for reaching level 330!"}
   }
}

local rewardLevel = CreatureEvent("RewardLevel")
function rewardLevel.onAdvance(player, skill, oldLevel, newLevel)


    if skill ~= SKILL_LEVEL or newLevel <= oldLevel then
        
        return true
    
    end

        for voc, x in pairs(table) do
            if isInArray(voc, player:getVocation():getId()) then
            	for level, z in pairs(x) do
            		if newLevel >= level and player:getStorageValue(z.storage) ~= 1 then
                		for v = 1, #z.items do
                			local ret = ", "
                			if v == 1 then
                			ret = ""
                		
                                        end
				        player:addItem(z.items[v].itemid, z.items[v].count)
            				player:sendTextMessage(MESSAGE_EVENT_ADVANCE, z.msg)
            				player:setStorageValue(z.storage, 1)
                		end
                        end
                end
      
   			player:save()

   			return true
   
            end
         end
end

rewardLevel:register()